#!/bin/bash
# Quick script to help upload indexes to Render

echo "ğŸ“¦ Render Index Upload Helper"
echo "=============================="
echo ""

# Check if zip exists
if [ ! -f "clinical-ai-indexes.zip" ]; then
    echo "âŒ Error: clinical-ai-indexes.zip not found!"
    echo "Run ./prepare-indexes.sh first to create it."
    exit 1
fi

echo "âœ… Found: clinical-ai-indexes.zip"
echo "   Size: $(du -sh clinical-ai-indexes.zip | cut -f1)"
echo ""
echo "ğŸ“‹ Upload Instructions for Render:"
echo ""
echo "1. Go to Render Dashboard: https://dashboard.render.com"
echo "   â””â”€ Select your 'clinical-ai-backend' service"
echo ""
echo "2. Click 'Shell' tab (top navigation)"
echo "   â””â”€ Wait for shell to connect (green status)"
echo ""
echo "3. In the shell, run:"
echo "   cd /app/indexes"
echo "   pwd    # Should show: /app/indexes"
echo ""
echo "4. Upload file:"
echo "   â””â”€ Look for 'Upload' button in shell interface"
echo "   â””â”€ OR use the file path shown in shell"
echo "   â””â”€ Select: $(pwd)/clinical-ai-indexes.zip"
echo ""
echo "5. Extract in Render shell:"
echo "   unzip clinical-ai-indexes.zip"
echo "   ls -la    # Verify 9 files"
echo "   rm clinical-ai-indexes.zip    # Clean up"
echo ""
echo "6. Restart service:"
echo "   â””â”€ Go back to dashboard"
echo "   â””â”€ Click 'Manual Deploy' â†’ 'Clear build cache & deploy'"
echo ""
echo "7. Verify it worked:"
echo "   â””â”€ Visit: https://your-backend.onrender.com/health"
echo "   â””â”€ Should show all 4 domains loaded"
echo ""
echo "=============================="
echo "ğŸ“ File ready at:"
echo "   $(pwd)/clinical-ai-indexes.zip"
echo ""
echo "ğŸ’¡ Tip: Keep this terminal open for easy copy-paste!"
echo ""
